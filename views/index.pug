extends layout

block content
  form.searchbar(action="/books" method="GET")
    input(name="q" placeholder="Search for a title, author, genre, or year...")
    button(type="submit") Search
  br
  p
    a.button(href='/books/new') Create New Book
  if books.length != 0
    table(data-books=books)
      thead
        tr
          th Title
          th Author
          th Genre
          th Year
      tbody
        each book in books.slice(0,5)
          tr
            td
              a(href=`/books/${book.id}`)= book.title
            td= book.author
            td= book.genre
            td= book.year
  else
    p Sorry, no books matched your search for #{queryTerm}!
  footer
    - var pageCount = 1;
    while pageCount <= Math.ceil(count/5)
      a.button(href=`/books?q=${queryTerm}&page=${pageCount}` class=`page ${ page == pageCount ? 'active' : '' }`)= pageCount++
  if queryTerm 
    p
      a.button(href='/books') Home


